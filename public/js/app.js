(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+etw":function(t,e){},"/gOr":function(t,e,a){"use strict";var i=a("+etw");a.n(i).a},0:function(t,e,a){a("bUC5"),t.exports=a("pyCd")},"9Wh1":function(t,e,a){window._=a("LvDl"),window.Vue=a("XuX8"),window.axios=a("vDqi"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"},GrSy:function(t,e){},R0L8:function(t,e,a){"use strict";var i=a("UGXc");a.n(i).a},UGXc:function(t,e){},"VFE+":function(t,e,a){"use strict";var i=a("qDMc");a.n(i).a},bUC5:function(t,e,a){"use strict";a.r(e);var i=a("XuX8"),n=a.n(i),s=a("f0Wu"),r=a.n(s),o={name:"Archive",data:function(){return{days:[],shows:[],slotPlaying:null,today:r()().format("YYYY-MM-DD")}},mounted:function(){for(var t=r()(),e=4;e>0;){var a={};a.calendar=t.calendar(),a.format=t.format("YYYY-MM-DD"),a.niceday=t.calendar().split(" at")[0],this.days.push(a),t.subtract(1,"day"),e--}},computed:{radioNow:function(){return r()().tz(this.$parent.radioTZ).format("HH:mm:ss")},isToday:function(){return r()().format("YYYY-MM-DD")===this.today}},methods:{isFuture:function(t){var e=r()(this.today+" "+t,"YYYY-MM-DD HH:mm:ss").tz(this.$parent.radioTZ,!0);return r()().tz(this.$parent.radioTZ).diff(e)<0},toYourTime:function(t){return r()(this.today+" "+t,"YYYY-MM-DD HH:mm:ss").tz(this.$parent.radioTZ,!0).clone().tz(this.$parent.youTZ).calendar()},loadDay:function(t){var e=this;this.$parent.$refs.loader.loaded=!1;var a=this;return this.today=t,new Promise((function(i,n){e.loading=!0,axios.get("/api/archive/"+t).then((function(t){var e=t.data;a.shows=e.shows,a.$parent.$refs.player.loaded=!0,a.playArchive(r()().format("HH:mm")),i(e)})).catch((function(t){n(t)}))}))},playArchive:function(t){var e=this;this.slotPlaying=t,this.$parent.$refs.loader.loaded=!1;var a=this;return new Promise((function(i,n){e.loading=!0,axios.get("/api/play/"+t+":00/"+a.today).then((function(t){var e=t.data;a.$parent.config=e,a.$parent.$refs.player.url=a.$parent.config.url+"#t="+a.$parent.config.offset,i(e)})).catch((function(t){n(t)}))}))}}},l=(a("/gOr"),a("KHd+")),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"pushtop"},[a("div",{staticClass:"h5 text-center text-secondary"},[t._v("\n      Archive\n    ")]),t._v(" "),a("div",{staticClass:"col-12 p-0"},[a("ul",{staticClass:"list-group list-group-striped list-group-flush small"},t._l(t.days,(function(e){return a("li",{key:e.format,staticClass:"list-group-item p-2 rounded list-day",class:{"list-group-item-secondary":e.format===t.today}},[a("a",{staticClass:"h6 nav-link",attrs:{href:"/archive/"+e.format},on:{click:function(a){return a.preventDefault(),t.loadDay(e.format)}}},[t._v("\n            "+t._s(e.calendar)+"\n          ")]),t._v(" "),e.format===t.today?a("ul",{staticClass:"list-group  list-group-flush"},t._l(t.shows,(function(e,i){return a("li",{key:i,staticClass:"list-group-item p-1 rounded",class:{"list-group-item-success":t.slotPlaying===i,"list-group-item-danger":e.now,hidden:t.isFuture(i)}},[a("button",{staticClass:"btn btn-sm",class:{"btn-success":t.slotPlaying==i,"btn-warning":t.slotPlaying!==i},on:{click:function(e){return t.playArchive(i)}}},[t.slotPlaying!==i?a("svg",{staticClass:"bi bi-stop",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"}})]):t._e(),t._v(" "),t.slotPlaying===i?a("svg",{staticClass:"bi bi-play",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M3.5 5A1.5 1.5 0 0 1 5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5zM5 4.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5V5a.5.5 0 0 0-.5-.5H5z"}})]):t._e()]),t._v(" "),a("strong",[t._v(" "+t._s(i)+" ")]),t._v(" "),a("strong",{staticClass:"float-right"},[t._v("\n                "+t._s(t.toYourTime(i))+"\n              ")]),t._v(" "),t._l(e.people,(function(e,i){return a("span",{key:i},[a("a",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.name))])])})),t._v(" "),e.now?a("span",{staticClass:"badge badge-info"},[t.isToday?t._e():a("span",[t._v("TimeMachine now")])]):t._e(),t._v(" "),a("span",{staticClass:"text-muted float-right"},[t._v("\n                "+t._s(e.desc)+"\n              ")])],2)})),0):t._e()])})),0)])])])}),[],!1,null,null,null).exports,d=a("o0o1"),u=a.n(d);function f(t,e,a,i,n,s,r){try{var o=t[s](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,n)}function h(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var s=t.apply(e,a);function r(t){f(s,i,n,r,o,"next",t)}function o(t){f(s,i,n,r,o,"throw",t)}r(void 0)}))}}var v={name:"Player",props:{config:{type:[Object,Array],default:null}},data:function(){return{liveUrl:"https://icecast6.play.cz/radio1-128.mp3",url:null}},mounted:function(){var t=this;if("mediaSession"in navigator&&"setActionHandler"in navigator.mediaSession){navigator.mediaSession.setActionHandler("play",h(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.$refs.player.play();case 3:navigator.mediaSession.playbackState="playing";case 4:case"end":return e.stop()}}),e)})))),navigator.mediaSession.setActionHandler("pause",(function(){t.$refs.player.pause(),navigator.mediaSession.playbackState="paused"}));navigator.mediaSession.setActionHandler("seekbackward",(function(e){var a=e.seekOffset||60;t.seekBack(a),t.updatePositionState()})),navigator.mediaSession.setActionHandler("seekforward",(function(e){var a=e.seekOffset||60;t.seekForward(a),t.updatePositionState()}))}window.addEventListener("keypress",(function(e){"Space"===e.code&&(t.$refs.player.paused?t.playAudio():t.$refs.player.pause())}))},computed:{radioNow:function(){return this.$parent.radioNow},radioThen:function(){return this.$parent.radioThen},mediaTime:function(){return 0}},methods:{seekForward:function(t){this.$refs.player.currentTime=Math.min(this.$refs.player.currentTime+t,this.$refs.player.duration)},seekBack:function(t){this.$refs.player.currentTime=Math.max(this.$refs.player.currentTime-t,0)},canplay:function(t){this.$parent.$refs.loader.loaded=!0,this.playAudio()},ended:function(t){this.$refs.player.pause(),this.$parent.load(this.config.next)},updatePositionState:function(){"mediaSession"in navigator&&"setPositionState"in navigator.mediaSession&&(this.livePlaying?this.updateMetadata():navigator.mediaSession.setPositionState({title:this.config.recoded_at+" "+this.radioThen,playbackRate:this.$refs.player.playbackRate,duration:this.$refs.player.duration,position:this.$refs.player.currentTime}))},updateMetadata:function(){if("mediaSession"in navigator){var t=this.config.recoded_at+" "+this.radioThen;this.livePlaying()&&(t="Live "+this.radioNow);var e="N/A";void 0!==this.config.playing.info.people&&(e=this.config.playing.info.people[0].name);this.config.playing.info.desc,navigator.mediaSession.metadata=new window.MediaMetadata({title:t,artist:e,album:"Radio 1 ðŸ•°Machine",artwork:[{src:"/images/icons/icon-96x96.png",sizes:"96x96",type:"image/png"},{src:"/images/icons/icon-128x128.png",sizes:"128x128",type:"image/png"},{src:"/images/icons/icon-192x192.png",sizes:"192x192",type:"image/png"},{src:"/images/icons/icon-256x256.png",sizes:"256x256",type:"image/png"},{src:"/images/icons/icon-384x384.png",sizes:"384x384",type:"image/png"},{src:"/images/icons/icon-512x512.png",sizes:"512x512",type:"image/png"}]})}},playAudio:function(){var t=this;this.$refs.player.play().then((function(){t.updateMetadata(),t.$forceUpdate()})).catch((function(t){}))},livePlaying:function(){return void 0!==this.$refs.player&&(this.url===this.liveUrl&&!this.$refs.player.paused)},timemachinePlaying:function(){return void 0!==this.$refs.player&&(this.url!==this.liveUrl&&!this.$refs.player.paused)},playTimemachine:function(){this.timemachinePlaying()?this.$refs.player.pause():(this.$parent.$refs.loader.loaded=!1,this.$parent.load().then((function(){}))),this.$forceUpdate()},playLive:function(){this.livePlaying()?this.$refs.player.pause():(this.$parent.$refs.loader.loaded=!1,this.url=this.liveUrl,this.$parent.live(),this.playAudio()),this.$forceUpdate()}}},p=(a("lwtG"),Object(l.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player-fixed card p-0"},[a("div",{staticClass:"text-center p-0"},[t.timemachinePlaying()?a("div",{staticClass:"alert alert-success small mb-0"},[t._v("\n      Serving show from "),a("strong",[t._v(t._s(t.config.recoded_at)+" ")]),t._v(" "),a("br"),t._v(" "),void 0!==t.config.playing?a("div",[a("span",{staticClass:"h3 text-white btn btn-sm btn-danger"},[t._v("\n          "+t._s(t.radioThen)+"\n        ")]),t._v(" "),a("span",{staticClass:"p-2 h6"},[a("svg",{staticClass:"bi bi-clock-history",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"}}),t._v(" "),a("path",{attrs:{"fill-rule":"evenodd",d:"M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"}}),t._v(" "),a("path",{attrs:{"fill-rule":"evenodd",d:"M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"}})]),t._v("\n\n          "+t._s(t.config.playing.starts)+" -  "+t._s(t.config.playing.ends)+"\n        ")]),t._v(" "),t._l(t.config.playing.info.people,(function(e,i){return a("span",{key:i,staticClass:"p-2"},[a("a",{staticClass:"btn btn-sm btn-outline-primary",attrs:{href:e.link,target:"_blank"}},[a("svg",{staticClass:"bi bi-file-person",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M4 1h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H4z"}}),t._v(" "),a("path",{attrs:{d:"M13.784 14c-.497-1.27-1.988-3-5.784-3s-5.287 1.73-5.784 3h11.568z"}}),t._v(" "),a("path",{attrs:{"fill-rule":"evenodd",d:"M8 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}})]),t._v("\n            "+t._s(e.name))])])})),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"text-muted"},[t._v("\n          "+t._s(t.config.playing.info.desc)+"\n        ")])],2):t._e()]):t._e(),t._v(" "),t.livePlaying()?a("div",{staticClass:"alert alert-success"},[t._v("\n      Serving live show from - "+t._s(t.radioNow)+"\n      "),a("br"),t._v(" "),void 0!==t.config.playing?a("div",[a("svg",{staticClass:"bi bi-clock-history",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"}}),t._v(" "),a("path",{attrs:{"fill-rule":"evenodd",d:"M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"}}),t._v(" "),a("path",{attrs:{"fill-rule":"evenodd",d:"M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"}})]),t._v("\n        "+t._s(t.config.playing.starts)+" -  "+t._s(t.config.playing.ends)+"\n        "),a("br"),t._v(" "),t._l(t.config.playing.info.people,(function(e,i){return a("p",{key:i},[a("a",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.name))])])})),t._v("\n\n        "+t._s(t.config.playing.info.desc)+"\n      ")],2):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"btn-group btn-block",attrs:{role:"group","aria-label":"Player"}},[a("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(e){return t.seekBack(60)}}},[t._v("\n      60s\n      "),a("svg",{staticClass:"bi bi-skip-backward",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M.5 3.5A.5.5 0 0 1 1 4v3.248l6.267-3.636c.52-.302 1.233.043 1.233.696v2.94l6.267-3.636c.52-.302 1.233.043 1.233.696v7.384c0 .653-.713.998-1.233.696L8.5 8.752v2.94c0 .653-.713.998-1.233.696L1 8.752V12a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm7 1.133L1.696 8 7.5 11.367V4.633zm7.5 0L9.196 8 15 11.367V4.633z"}})])]),t._v(" "),a("button",{staticClass:"btn",class:{"btn-success":t.livePlaying(),"btn-warning":!t.livePlaying()},attrs:{type:"button"},on:{click:function(e){return t.playLive()}}},[t.livePlaying()?a("span",[a("svg",{staticClass:"bi bi-play",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M3.5 5A1.5 1.5 0 0 1 5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5zM5 4.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5V5a.5.5 0 0 0-.5-.5H5z"}})]),t._v("\n        Stop\n      ")]):a("span",[a("svg",{staticClass:"bi bi-stop",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"}})]),t._v("\n        Play\n      ")]),t._v("\n      Live\n    ")]),t._v(" "),a("button",{staticClass:"btn",class:{"btn-success":t.timemachinePlaying(),"btn-warning":!t.timemachinePlaying()},attrs:{type:"button"},on:{click:function(e){return t.playTimemachine()}}},[t.timemachinePlaying()?a("span",[a("svg",{staticClass:"bi bi-play",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M3.5 5A1.5 1.5 0 0 1 5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5zM5 4.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 .5-.5V5a.5.5 0 0 0-.5-.5H5z"}})]),t._v("\n        Stop\n      ")]):a("span",[a("svg",{staticClass:"bi bi-stop",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"}})]),t._v("\n        Play\n      ")]),t._v("\n      Timemachine\n    ")]),t._v(" "),a("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(e){return t.seekForward(60)}}},[a("svg",{staticClass:"bi bi-skip-forward",attrs:{width:"2em",height:"2em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V8.752l-6.267 3.636c-.52.302-1.233-.043-1.233-.696v-2.94l-6.267 3.636C.713 12.69 0 12.345 0 11.692V4.308c0-.653.713-.998 1.233-.696L7.5 7.248v-2.94c0-.653.713-.998 1.233-.696L15 7.248V4a.5.5 0 0 1 .5-.5zM1 4.633v6.734L6.804 8 1 4.633zm7.5 0v6.734L14.304 8 8.5 4.633z"}})]),t._v("\n      60s\n    ")])]),t._v(" "),a("audio",{ref:"player",staticStyle:{width:"100%"},attrs:{preload:"metadata",controls:"",title:"Play",id:"player",src:t.url},on:{canplay:function(e){return t.canplay()},ended:function(e){return t.ended()}}},[t._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Your browser does not support the "),e("code",[this._v("audio")]),this._v(" element.")])}],!1,null,"287e5ae0",null).exports),m={name:"Loader",props:{config:{type:[Object,Array],default:null}},data:function(){return{loaded:!1}},mounted:function(){},computed:{radioNow:function(){return this.$parent.radioNow}},methods:{}},g=(a("R0L8"),{name:"Layout",components:{Archive:c,Player:p,Loader:Object(l.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"text-center"},[this._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spinner-grow text-warning text-center",staticStyle:{width:"5rem",height:"5rem"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[this._v("Loading...")])])}],!1,null,"6c1cbad8",null).exports},data:function(){return{radioTZ:"Europe/Prague",youTZ:"Australia/Perth",youNow:r()().format("HH:mm:ss"),youDate:r()().format("Y-MM-DD"),radioNow:r()().format("HH:mm:ss"),radioDate:r()().format("HH:mm:ss"),radioThen:r()().format("HH:mm:ss"),radioCalendar:r()().format("HH:mm:ss"),interval:null,config:{url:null,offset:0},offset:0,secondsLeft:0}},mounted:function(){var t=this;this.youTZ=Intl.DateTimeFormat().resolvedOptions().timeZone,this.interval=setInterval((function(){t.timeInternal()}),1e3);var e=this.youNow,a=window.location.href.split("/");5===a.length&&(e=a[4]+"/"+a[3]),this.load(e).then((function(){t.$refs.player.url=t.config.url+"#t="+t.config.offset,t.$refs.player.playAudio(),t.timeInternal(),t.$refs.archives.loadDay(t.radioDate)})).catch((function(t){}))},computed:{radioTime:function(){return r.a.tz(this.radioTZ)},radioZone:function(){return r.a.tz.zone(this.radioTZ)},youTime:function(){return r.a.tz(this.youTZ)},youZone:function(){return r.a.tz.zone(this.youTZ)},youOffset:function(){return(this.radioZone.utcOffset(r.a.now())-this.youZone.utcOffset(r.a.now()))/60},loaded:function(){return void 0===this.$refs.loader||this.$refs.loader.loaded}},methods:{app:function(){window.addToHomeScreen()},timeInternal:function(){if(this.offset++,this.youNow=r()().tz(this.youTZ).format("HH:mm:ss"),this.youDate=r()().tz(this.youTZ).format("dddd HH:mm:ss"),this.radioNow=r()().tz(this.radioTZ).format("dddd HH:mm:ss"),void 0!==this.$refs.player&&void 0!==this.$refs.player.$refs.player){var t=this.$refs.player.$refs.player;this.radioThen=r()(this.config.recoded_timestamp).add(t.currentTime,"seconds").format("dddd HH:mm:ss"),this.radioDate=r()(this.config.recoded_timestamp).add(t.currentTime,"seconds").format("Y-MM-DD"),this.radioCalendar=r()(this.config.recoded_timestamp).add(t.currentTime,"seconds").calendar()}},load:function(t){var e=this;this.$refs.loader.loaded=!1;var a,i=this;return a=void 0!==t?t:this.youNow,new Promise((function(t,n){e.loading=!0,axios.get("/api/play/"+a).then((function(e){var a=e.data;i.config=a,i.$refs.player.url=i.config.url+"#t="+i.config.offset,t(a)})).catch((function(t){n(t)}))}))},live:function(){var t=this;this.$refs.loader.loaded=!1;var e=this;return new Promise((function(a,i){t.loading=!0,axios.get("/api/live").then((function(t){var i=t.data;e.config=i,a(i)})).catch((function(t){i(t)}))}))}}}),y=(a("VFE+"),Object(l.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("main",{staticClass:"flex-shrink-0",attrs:{role:"main"}},[a("div",{staticClass:"container"},[t._m(0),t._v(" "),a("Loader",{ref:"loader"}),t._v(" "),a("div",{staticClass:"card "},[a("div",{staticClass:"card-body"},[a("p",{staticClass:"pb-2 text-center"},[t._v("\n            Radio1 Time: "),a("strong",[t._v(t._s(t.radioNow))]),a("br"),t._v("\n            Your Time: "),a("strong",[t._v(t._s(t.youDate))]),a("br"),t._v("\n            Timemachine Time: "),a("strong",[t._v(t._s(t.radioCalendar))])]),t._v(" "),a("p",{staticClass:"text-muted float-right"},[t._v("\n            Your are "+t._s(t.youOffset)+" hours\n            "),t.youOffset>0?a("span",[t._v("\n              in front of Radio 1\n            ")]):t._e(),t._v(" "),t.youOffset<0?a("span",[t._v("\n              behind\n            ")]):t._e(),t._v(" "),0==t.youOffset?a("span",[t._v("\n              In Prague :)\n            ")]):t._e()]),t._v(" "),a("player",{ref:"player",attrs:{config:t.config}}),t._v(" "),a("hr"),t._v(" "),a("archive",{ref:"archives"})],1)])],1)]),t._v(" "),t._m(1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row pb-2"},[e("div",{staticClass:"col-3 text-center"},[e("a",{attrs:{href:"/"}},[e("img",{staticClass:"logo rounded-circle img img-fluid",attrs:{src:"/images/icons/icon-192x192.png",title:"Time Machine",width:"50"}})])]),this._v(" "),e("div",{staticClass:"col-9 text-center"},[e("h1",{staticClass:"h2"},[this._v("\n            R1 Time Machine\n          ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer mt-auto py-3"},[e("div",{staticClass:"container"},[e("span",{staticClass:"text-muted"},[this._v("\n        Time Machine for "),e("a",{attrs:{href:"https://www.radio1.cz/",target:"_blank"}},[this._v("Radio 1")]),this._v("\n        Source on "),e("a",{attrs:{href:"https://github.com/cerw/time-machine-radio",target:"_blank"}},[this._v("github.")]),this._v("\n        Feedback please "),e("a",{attrs:{href:"https://twitter.com/cerw",target:"_blank"}},[this._v("@cerw")])])])])}],!1,null,"45c6e365",null).exports),w=a("WIaV");n.a.use(w.a),a("9Wh1"),a("tWwT"),new n.a({el:"#app",methods:{},render:function(t){return t(y)}})},lwtG:function(t,e,a){"use strict";var i=a("GrSy");a.n(i).a},pyCd:function(t,e){},qDMc:function(t,e){},tWwT:function(t,e,a){"use strict";a.r(e);var i=a("o0o1"),n=a.n(i),s=a("rPoc"),r=a("2Glv"),o=a("XuX8"),l=a.n(o);function c(t,e,a,i,n,s,r){try{var o=t[s](r),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(i,n)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(i,n){var s=t.apply(e,a);function r(t){c(s,i,n,r,o,"next",t)}function o(t){c(s,i,n,r,o,"throw",t)}r(void 0)}))}}if("serviceWorker"in navigator){var u=new s.a("/sw.js");u.addEventListener("controlling",(function(t){})),u.addEventListener("activated",(function(t){t.isUpdate})),u.addEventListener("waiting",function(){var t=d(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),u.addEventListener("message",function(){var t=d(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data&&"CACHE_UPDATED"===e.data.type&&e.data.payload.updatedURL,e.data&&"SKIP_WAITING"===e.data.type&&Object(r.a)();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),u.addEventListener("installed",(function(t){t.isUpdate&&l.a.swal.fire({title:"Newer version of the app is available!.",icon:"info",showCancelButton:!0,confirmButtonText:"Reload new version",cancelButtonText:"Not right now",showLoaderOnConfirm:!0}).then((function(t){t.value&&window.location.reload()}))})),u.register().then((function(){}))}}},[[0,1,2]]]);